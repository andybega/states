<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Visualize missing and non-proper cases for state panel data — plot_missing • states</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Visualize missing and non-proper cases for state panel data — plot_missing" />
<meta property="og:description" content="Plot missing values by country and date, and additionally identify country-date
cases that do or do not match an independent state list." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">states</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.2.9008</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/differences-gw-cow.html">G&amp;W and COW country code differences</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/andybega/states/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Visualize missing and non-proper cases for state panel data</h1>
    <small class="dont-index">Source: <a href='https://github.com/andybega/states/blob/master/R/plot-missing.R'><code>R/plot-missing.R</code></a></small>
    <div class="hidden name"><code>plot_missing.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Plot missing values by country and date, and additionally identify country-date
cases that do or do not match an independent state list.</p>
    </div>

    <pre class="usage"><span class='fu'>plot_missing</span>(
  <span class='no'>data</span>,
  <span class='kw'>x</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>ccode</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>time</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>period</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>statelist</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>partial</span> <span class='kw'>=</span> <span class='st'>"any"</span>,
  <span class='kw'>skip_labels</span> <span class='kw'>=</span> <span class='fl'>5</span>,
  <span class='kw'>space</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Deprecated.html'>deprecated</a></span>()
)

<span class='fu'>missing_info</span>(
  <span class='no'>data</span>,
  <span class='kw'>x</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>ccode</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>time</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>period</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>statelist</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>partial</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>space</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Deprecated.html'>deprecated</a></span>()
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>State panel data frame</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>Variable names(s), e.g. "x" or c("x1", "x2"). Default is NULL, in
which case all columns expect the ccode and time ID columns will be used.</p></td>
    </tr>
    <tr>
      <th>ccode</th>
      <td><p>Name of variable identifying state country codes. If NULL
(default) and one of "gwcode" or "cowcode" is a column in the data, it
will be used.</p></td>
    </tr>
    <tr>
      <th>time</th>
      <td><p>Name of time identifier. If NULL and a "date" or "year" column
are in the data, they will be used ("year", preferentially, if both are
present)</p></td>
    </tr>
    <tr>
      <th>period</th>
      <td><p>Time period in which the data are. NULL by default and inferred
to be "year" if the "time" column has name "year" or contains integers with
a range between 1799 and 2050. Required if the "time" column is a
<code><a href='https://rdrr.io/r/base/Dates.html'>base::Date()</a></code> vector to avoid ambiguity.</p></td>
    </tr>
    <tr>
      <th>statelist</th>
      <td><p>Check not only missing values, but presence or absence of
observations against a list of independent states? One of "GW", "COW" or
"none". NULL by default, in which case it will be inferred if the
ccode columns have the name "gwcode" or "cowcode", and "none" otherwise.</p></td>
    </tr>
    <tr>
      <th>partial</th>
      <td><p>Option for how to handle edge cases where a state is independent
for only part of a time period (year, month, etc.). Options include
"exact", and "any". See <code><a href='state_panel.html'>state_panel()</a></code> for details. If NULL (default) and
the "time" column is a date, it will be set to "exact", for yearly
"time" columns it will be set to "any".</p></td>
    </tr>
    <tr>
      <th>skip_labels</th>
      <td><p>Only plot the label for every n-th country on the y-axis
to avoid overplotting.</p></td>
    </tr>
    <tr>
      <th>space</th>
      <td><p>Deprecated, use "ccode" argument instead.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>plot_missing</code> returns a ggplot2 object.</p>
<p><code>missing_info</code> returns a data frame with components:</p>
<dt>ccode</dt><dd><p>ccode identifier, with name equal to the "ccode" argument, e.g. "ccode".</p></dd>
<dt>time</dt><dd><p>Time identifier, with name equal to the "time" argument, e.g. "date".</p></dd>
<dt>independent</dt><dd><p>A logical vector, is the statelist argument is none, NA.</p></dd>
<dt>missing_value</dt><dd><p>A logical vector indicating if that record has missing values</p></dd>
<dt>status</dt><dd><p>The label used for plotting, combining the independence and missing value information for a case as appropriate.</p></dd>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>missing_info</code> provides the information that is plotted with
<code>plot_missing</code>. The latter returns a ggplot, and thus can be chained
with other ggplot functions as usual.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Create an example data frame with missing values</span>
<span class='no'>cy</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='state_panel.html'>state_panel</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span>(<span class='st'>"1980-06-30"</span>), <span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span>(<span class='st'>"2015-06-30"</span>), <span class='kw'>by</span> <span class='kw'>=</span> <span class='st'>"year"</span>,
<span class='kw'>useGW</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='no'>cy</span>$<span class='no'>myvar</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span>(<span class='no'>cy</span>))
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span>(<span class='fl'>1234</span>)
<span class='no'>cy</span>$<span class='no'>myvar</span>[<span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span>(<span class='fl'>1</span>:<span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span>(<span class='no'>cy</span>), <span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span>(<span class='no'>cy</span>)*<span class='fl'>.1</span>, <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)] <span class='kw'>&lt;-</span> <span class='fl'>NA</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span>(<span class='no'>cy</span>)</div><div class='output co'>#&gt; 'data.frame':	6680 obs. of  3 variables:
#&gt;  $ gwcode: int  2 2 2 2 2 2 2 2 2 2 ...
#&gt;  $ year  : int  1980 1981 1982 1983 1984 1985 1986 1987 1988 1989 ...
#&gt;  $ myvar : num  0.3801 -0.0674 0.2801 0.3303 0.2848 ...</div><div class='input'>
<span class='co'># Visualize missing values:</span>
<span class='fu'>plot_missing</span>(<span class='no'>cy</span>, <span class='kw'>statelist</span> <span class='kw'>=</span> <span class='st'>"none"</span>)</div><div class='img'><img src='plot_missing-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># missing_info() generates the data underlying plot_missing():</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='fu'>missing_info</span>(<span class='no'>cy</span>, <span class='kw'>statelist</span> <span class='kw'>=</span>  <span class='st'>"none"</span>))</div><div class='output co'>#&gt;      gwcode       year independent missing_value   status
#&gt; 1         2 1980-01-01          NA         FALSE Complete
#&gt; 202       2 1981-01-01          NA         FALSE Complete
#&gt; 403       2 1982-01-01          NA         FALSE Complete
#&gt; 604       2 1983-01-01          NA         FALSE Complete
#&gt; 805       2 1984-01-01          NA         FALSE Complete
#&gt; 1006      2 1985-01-01          NA         FALSE Complete</div><div class='input'>
<span class='co'># if we specify a statelist to check against, 'independent' will have values</span>
<span class='co'># now:</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='fu'>missing_info</span>(<span class='no'>cy</span>, <span class='kw'>statelist</span> <span class='kw'>=</span> <span class='st'>"GW"</span>))</div><div class='output co'>#&gt;   gwcode       year independent missing_value                status
#&gt; 1      2 1980-01-01           1         FALSE Complete, independent
#&gt; 2      2 1981-01-01           1         FALSE Complete, independent
#&gt; 3      2 1982-01-01           1         FALSE Complete, independent
#&gt; 4      2 1983-01-01           1         FALSE Complete, independent
#&gt; 5      2 1984-01-01           1         FALSE Complete, independent
#&gt; 6      2 1985-01-01           1         FALSE Complete, independent</div><div class='input'>
<span class='co'># Check data also against G&amp;W list of independent states</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='fu'>missing_info</span>(<span class='no'>cy</span>, <span class='kw'>statelist</span> <span class='kw'>=</span> <span class='st'>"GW"</span>))</div><div class='output co'>#&gt;   gwcode       year independent missing_value                status
#&gt; 1      2 1980-01-01           1         FALSE Complete, independent
#&gt; 2      2 1981-01-01           1         FALSE Complete, independent
#&gt; 3      2 1982-01-01           1         FALSE Complete, independent
#&gt; 4      2 1983-01-01           1         FALSE Complete, independent
#&gt; 5      2 1984-01-01           1         FALSE Complete, independent
#&gt; 6      2 1985-01-01           1         FALSE Complete, independent</div><div class='input'><span class='fu'>plot_missing</span>(<span class='no'>cy</span>, <span class='kw'>statelist</span> <span class='kw'>=</span> <span class='st'>"GW"</span>)</div><div class='img'><img src='plot_missing-2.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># Live example with Polity data</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='st'>"polity"</span>)
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='no'>polity</span>)</div><div class='output co'>#&gt;   ccode year polity
#&gt; 1   700 1800     -6
#&gt; 2   700 1801     -6
#&gt; 3   700 1802     -6
#&gt; 4   700 1803     -6
#&gt; 5   700 1804     -6
#&gt; 6   700 1805     -6</div><div class='input'><span class='fu'>plot_missing</span>(<span class='no'>polity</span>, <span class='kw'>x</span> <span class='kw'>=</span> <span class='st'>"polity"</span>, <span class='kw'>ccode</span> <span class='kw'>=</span> <span class='st'>"ccode"</span>, <span class='kw'>time</span> <span class='kw'>=</span> <span class='st'>"year"</span>,
             <span class='kw'>statelist</span> <span class='kw'>=</span> <span class='st'>"COW"</span>)</div><div class='img'><img src='plot_missing-3.png' alt='' width='700' height='433' /></div><div class='input'><span class='co'># COW starts in 1816; Polity has excess data for several non-independent</span>
<span class='co'># states after that date, and is missing coverage for several countries.</span>

<span class='co'># The date option is relevant for years in which states gain or lose</span>
<span class='co'># independence, so this will be slighlty different:</span>
<span class='no'>polity</span>$<span class='no'>date</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span>(<span class='no'>polity</span>$<span class='no'>year</span>, <span class='st'>"-01-01"</span>))
<span class='no'>polity</span>$<span class='no'>year</span> <span class='kw'>&lt;-</span> <span class='kw'>NULL</span>
<span class='fu'>plot_missing</span>(<span class='no'>polity</span>, <span class='kw'>x</span> <span class='kw'>=</span> <span class='st'>"polity"</span>, <span class='kw'>ccode</span> <span class='kw'>=</span> <span class='st'>"ccode"</span>, <span class='kw'>time</span> <span class='kw'>=</span> <span class='st'>"date"</span>,
             <span class='kw'>period</span> <span class='kw'>=</span> <span class='st'>"year"</span>, <span class='kw'>statelist</span> <span class='kw'>=</span> <span class='st'>"COW"</span>)</div><div class='img'><img src='plot_missing-4.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># plot_missing returns a ggplot2 object, so you can do anything you want</span>
<span class='no'>polity</span>$<span class='no'>year</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/integer.html'>as.integer</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/substr.html'>substr</a></span>(<span class='no'>polity</span>$<span class='no'>date</span>, <span class='fl'>1</span>, <span class='fl'>4</span>))
<span class='no'>polity</span>$<span class='no'>date</span> <span class='kw'>&lt;-</span> <span class='kw'>NULL</span>
<span class='fu'>plot_missing</span>(<span class='no'>polity</span>, <span class='kw'>ccode</span> <span class='kw'>=</span> <span class='st'>"ccode"</span>, <span class='kw'>statelist</span> <span class='kw'>=</span> <span class='st'>"COW"</span>) +
  <span class='kw pkg'>ggplot2</span><span class='kw ns'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/coord_flip.html'>coord_flip</a></span>()</div><div class='img'><img src='plot_missing-5.png' alt='' width='700' height='433' /></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Andreas Beger.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.0.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


